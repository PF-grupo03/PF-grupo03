(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{9009:function(e,s,r){Promise.resolve().then(r.bind(r,6737))},6463:function(e,s,r){"use strict";var t=r(1169);r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}})},6737:function(e,s,r){"use strict";var t=r(7437),a=r(4378),n=r(380),o=r(7138),l=r(6463),c=r(2265);s.default=()=>{let e=(0,l.useRouter)(),{signIn:s}=(0,c.useContext)(a.S),[r,i]=(0,c.useState)({email:"",password:""}),[u,d]=(0,c.useState)({email:"",password:""}),m=e=>{let{name:s,value:t}=e.target;i({...r,[s]:t}),d((0,n.m)({...r,[s]:t}))},g=async t=>{t.preventDefault();let a=(0,n.m)(r);if(Object.keys(a).length>0){d(a),alert("Please correct the errors in the form.");return}try{let t=await s(r);t.success?(alert(t.message),e.push("/")):alert(t.message)}catch(e){alert("An error occurred. Please try again.")}};return(0,t.jsxs)("div",{className:"flex justify-center mt-32 mb-32",children:[(0,t.jsxs)("div",{className:"w-full max-w-md  flex flex-col bg-white p-8 shadow-lg rounded-l-lg",children:[(0,t.jsx)("h2",{className:"text-3xl font-bold mb-4 text-center",children:"Login"}),(0,t.jsx)("p",{className:"text-gray-600 text-center mb-8",children:"Login to access your Travel Zone account"}),(0,t.jsxs)("form",{onSubmit:g,children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"email-address",className:"block text-gray-700 font-bold",children:"Email:"}),(0,t.jsx)("input",{id:"email-address",name:"email",type:"email",value:r.email,required:!0,onChange:m,placeholder:"example@gmail.com",className:"mt-1 p-2 block w-full border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-orange-400"}),u.email&&(0,t.jsx)("p",{className:"text-red-500 text-sm",children:u.email})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-gray-700 font-bold",children:"Password:"}),(0,t.jsxs)("div",{className:"",children:[(0,t.jsx)("input",{id:"password",name:"password",type:"password",value:r.password,required:!0,onChange:m,placeholder:"************",className:"mt-1 p-2 block w-full border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-orange-400"}),u.password&&(0,t.jsx)("p",{className:"text-red-500 text-sm",children:u.password}),(0,t.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-500",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"})})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{type:"checkbox",id:"remember",className:"mr-2"}),(0,t.jsx)("label",{htmlFor:"remember",className:"text-gray-700",children:"Remember me"})]}),(0,t.jsx)("a",{href:"#",className:"text-red-500",children:"Forgot Password?"})]}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"submit",className:"w-full bg-orange-500 hover:bg-orange-600 text-white p-2 rounded",children:"Login"})})]}),(0,t.jsxs)("p",{className:"text-center text-gray-600 mt-4",children:["Don't have an account?"," ",(0,t.jsx)(o.default,{href:"/register",className:"text-red-500",children:"Sign up"})]})]}),(0,t.jsx)("div",{className:"w-96",children:(0,t.jsx)("img",{src:"/AvionLogin.jpg",alt:"Resort",className:"  rounded-r-lg"})})]})}},4378:function(e,s,r){"use strict";r.d(s,{S:function(){return c},UserProvider:function(){return i}});var t=r(7437);let a=async e=>{let s=await fetch("https://pf-grupo03-back.onrender.com/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw Error((await s.json()).message||"Error registering user.");return await s.json()},n=async e=>{let s=await fetch("https://pf-grupo03-back.onrender.com/auth/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw Error((await s.json()).message||"Error Loging user.");return await s.json()},o=async e=>{let s=await fetch("https://m4f.onrender.com/users/orders",{headers:{Authorization:"".concat(e)}});return await s.json()};var l=r(2265);let c=(0,l.createContext)({user:null,setUser:()=>{},isLogged:!1,setIsLogged:()=>{},signIn:async()=>({success:!1,message:""}),signUp:async()=>({success:!1,message:""}),getOrders:async()=>{},orders:[],logout:()=>{}}),i=e=>{let{children:s}=e,[r,i]=(0,l.useState)(null),[u,d]=(0,l.useState)(!1),[m,g]=(0,l.useState)([]),h=async e=>{try{if((await a(e)).id)return await f({email:e.email,password:e.password}),{success:!0,message:"Account created successfully!"};return{success:!1,message:"Failed to create account."}}catch(e){return{success:!1,message:e.message||"An error occurred. Please try again."}}},f=async e=>{try{let s=await n(e);if(s.token)return i(s),localStorage.setItem("user",JSON.stringify(s)),localStorage.setItem("token",s.token),{success:!0,message:"Login successful!"};return{success:!1,message:"Invalid credentials."}}catch(e){return{success:!1,message:e.message||"An error occurred. Please try again."}}},p=async()=>{try{let e=localStorage.getItem("token")||"",s=await o(e);g(s)}catch(e){return console.error(e),[]}};return(0,l.useEffect)(()=>{localStorage.getItem("token")&&d(!0)},[r]),(0,l.useEffect)(()=>{let e=localStorage.getItem("user");if(e){i(JSON.parse(e));return}i(null)},[]),(0,t.jsx)(c.Provider,{value:{user:r,setUser:i,isLogged:u,setIsLogged:d,signIn:f,signUp:h,orders:m,getOrders:p,logout:()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),i(null),d(!1)}},children:s})}},380:function(e,s,r){"use strict";function t(e){let s={};return e.email?e.password||(s.password="Password is required"):s.email="Email is required",s}function a(e){let s={};return e.name.trim()||(s.name="El nombre es obligatorio"),e.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)||(s.email="El correo electr\xf3nico no es v\xe1lido"):s.email="El correo electr\xf3nico es obligatorio",e.password?e.password.length<8?s.password="La contrase\xf1a debe tener al menos 8 caracteres":/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/.test(e.password)||(s.password="La contrase\xf1a debe tener al menos 8 caracteres, incluyendo una letra y un n\xfamero"):s.password="La contrase\xf1a es obligatoria",s}r.d(s,{m:function(){return t},n:function(){return a}})}},function(e){e.O(0,[138,971,23,744],function(){return e(e.s=9009)}),_N_E=e.O()}]);