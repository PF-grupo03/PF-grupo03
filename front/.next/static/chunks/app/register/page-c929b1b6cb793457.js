(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{7847:function(e,r,s){Promise.resolve().then(s.bind(s,7013))},6463:function(e,r,s){"use strict";var a=s(1169);s.o(a,"useRouter")&&s.d(r,{useRouter:function(){return a.useRouter}})},7013:function(e,r,s){"use strict";var a=s(7437),t=s(4378),n=s(380),o=s(6463),l=s(2265);r.default=function(){let{signUp:e}=(0,l.useContext)(t.S),[r,s]=(0,l.useState)(""),c=(0,o.useRouter)(),[i,u]=(0,l.useState)({name:"",username:"",phone:"",email:"",password:"",dni:""}),[d,m]=(0,l.useState)({name:"",username:"",phone:0,email:"",password:""}),g={name:i.name,username:i.username,email:i.email,password:i.password,phone:Number(i.phone),dni:Number(i.dni)},h=async r=>{r.preventDefault();let s=(0,n.n)(g);if(Object.keys(s).length>0){m(s),alert("Check your info");return}try{let r=await e(g);r.success?(alert(r.message),u({name:"",username:"",email:"",phone:"",password:"",dni:""}),c.push("/")):alert(r.message)}catch(e){console.error("Error during sign-up:",e),alert("An error occurred while creating the account.")}},p=e=>{let{name:r,value:s}=e.target;u({...i,[r]:s}),m((0,n.n)({...g,[r]:s}))};return(0,a.jsxs)("div",{className:"flex justify-center mt-24 mb-32 items-start",children:[(0,a.jsxs)("div",{className:"w-full max-w-md h-[100vh] flex flex-col bg-white p-9 rounded-lg shadow-lg",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-1 text-center",children:"Register"}),(0,a.jsx)("br",{}),(0,a.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"name",className:"block text-gray-700 font-bold",children:"Full Name:"}),(0,a.jsx)("input",{type:"text",id:"name",name:"name",value:i.name,onChange:p,placeholder:"Full Name",className:"mt-1 p-2 block w-full border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-orange-400 ".concat(d.name?"border-red-500":"border-gray-300")}),d.name&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"username",className:"block text-gray-700 font-bold",children:"Username:"}),(0,a.jsx)("input",{type:"text",id:"username",name:"username",value:i.username,onChange:p,placeholder:"Username",className:"mt-1 p-2 block w-full border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-orange-400 ".concat(d.username?"border-red-500":"border-gray-300")}),d.username&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.username})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"phone",className:"block text-gray-700 font-bold",children:"Phone Number:"}),(0,a.jsx)("input",{type:"number",id:"phone",name:"phone",value:i.phone,onChange:p,placeholder:"Phone Number",className:"mt-1 p-2 block w-full border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-orange-400 ".concat(d.phone?"border-red-500":"border-gray-300")}),d.phone&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.phone})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-gray-700 font-bold",children:"Email:"}),(0,a.jsx)("input",{type:"email",id:"email",name:"email",value:i.email,onChange:p,placeholder:"Email",className:"mt-1 p-2 block w-full border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-orange-400 ".concat(d.email?"border-red-500":"border-gray-300")}),d.email&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-gray-700 font-bold",children:"Password:"}),(0,a.jsx)("input",{type:"password",id:"password",name:"password",value:i.password,onChange:p,placeholder:"Password",className:"mt-1 p-2 block w-full border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-orange-400 ".concat(d.password?"border-red-500":"border-gray-300")}),d.password&&(0,a.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.password})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"dni",className:"block text-gray-700 font-bold",children:"DNI:"}),(0,a.jsx)("input",{type:"text",id:"dni",name:"dni",value:i.dni,onChange:p,placeholder:"DNI",className:"mt-1 p-2 block w-full border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-orange-400 "})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"checkbox",id:"terms",required:!0}),(0,a.jsxs)("label",{htmlFor:"terms",className:"ml-2 text-gray-700",children:["I agree to the"," ",(0,a.jsx)("a",{href:"#",className:"text-red-500",children:"Terms and Privacy Policy"})]})]}),(0,a.jsx)("button",{type:"submit",className:"w-full py-2 bg-orange-500 text-white font-semibold rounded-md hover:bg-orange-600",children:"Create account"})]}),r&&(0,a.jsx)("p",{className:"text-green-500 text-sm mt-2 text-center",children:r}),(0,a.jsxs)("p",{className:"text-center text-gray-700 mt-4",children:["Already have an account?"," ",(0,a.jsx)("a",{href:"#",className:"text-red-500",children:"Login"})]})]}),(0,a.jsx)("div",{className:"w-1/3 h-full ",children:(0,a.jsx)("img",{src:"/register.jpg",alt:"Register",className:"rounded-r-lg w-full h-screen"})})]})}},4378:function(e,r,s){"use strict";s.d(r,{S:function(){return c},UserProvider:function(){return i}});var a=s(7437);let t=async e=>{let r=await fetch("https://pf-grupo03-back.onrender.com/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok)throw Error((await r.json()).message||"Error registering user.");return await r.json()},n=async e=>{let r=await fetch("https://pf-grupo03-back.onrender.com/auth/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok)throw Error((await r.json()).message||"Error Loging user.");return await r.json()},o=async e=>{let r=await fetch("https://m4f.onrender.com/users/orders",{headers:{Authorization:"".concat(e)}});return await r.json()};var l=s(2265);let c=(0,l.createContext)({user:null,setUser:()=>{},isLogged:!1,setIsLogged:()=>{},signIn:async()=>({success:!1,message:""}),signUp:async()=>({success:!1,message:""}),getOrders:async()=>{},orders:[],logout:()=>{}}),i=e=>{let{children:r}=e,[s,i]=(0,l.useState)(null),[u,d]=(0,l.useState)(!1),[m,g]=(0,l.useState)([]),h=async e=>{try{if((await t(e)).id)return await p({email:e.email,password:e.password}),{success:!0,message:"Account created successfully!"};return{success:!1,message:"Failed to create account."}}catch(e){return{success:!1,message:e.message||"An error occurred. Please try again."}}},p=async e=>{try{let r=await n(e);if(r.token)return i(r),localStorage.setItem("user",JSON.stringify(r)),localStorage.setItem("token",r.token),{success:!0,message:"Login successful!"};return{success:!1,message:"Invalid credentials."}}catch(e){return{success:!1,message:e.message||"An error occurred. Please try again."}}},f=async()=>{try{let e=localStorage.getItem("token")||"",r=await o(e);g(r)}catch(e){return console.error(e),[]}};return(0,l.useEffect)(()=>{localStorage.getItem("token")&&d(!0)},[s]),(0,l.useEffect)(()=>{let e=localStorage.getItem("user");if(e){i(JSON.parse(e));return}i(null)},[]),(0,a.jsx)(c.Provider,{value:{user:s,setUser:i,isLogged:u,setIsLogged:d,signIn:p,signUp:h,orders:m,getOrders:f,logout:()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),i(null),d(!1)}},children:r})}},380:function(e,r,s){"use strict";function a(e){let r={};return e.email?e.password||(r.password="Password is required"):r.email="Email is required",r}function t(e){let r={};return e.name.trim()||(r.name="El nombre es obligatorio"),e.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)||(r.email="El correo electr\xf3nico no es v\xe1lido"):r.email="El correo electr\xf3nico es obligatorio",e.password?e.password.length<8?r.password="La contrase\xf1a debe tener al menos 8 caracteres":/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/.test(e.password)||(r.password="La contrase\xf1a debe tener al menos 8 caracteres, incluyendo una letra y un n\xfamero"):r.password="La contrase\xf1a es obligatoria",r}s.d(r,{m:function(){return a},n:function(){return t}})}},function(e){e.O(0,[971,23,744],function(){return e(e.s=7847)}),_N_E=e.O()}]);